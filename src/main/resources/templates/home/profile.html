<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" layout:decorate="~{layout/index.html}">

<head>
	<title>Big store a Ecommerce Online Shopping Category Flat
		Bootstrap Responsive Website Template | Terms And Conditions ::
		w3layouts</title>
	<!-- for-mobile-apps -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta property="og:title" content="Vide" />
	<meta name="keywords" content="Big store Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
	<script type="application/x-javascript">

	 addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
function hideURLbar(){ window.scrollTo(0,1); } 

</script>
	<!-- //for-mobile-apps -->
	<link th:href='@{/home/css/bootstrap.css}' rel='stylesheet' type='text/css' />
	<!-- Custom Theme files -->
	<link th:href='@{/home/css/style.css}' rel='stylesheet' type='text/css' />
	<!-- js -->
	<script th:src='@{/home/js/jquery-1.11.1.min.js}'></script>
	<!-- //js -->
	<!-- start-smoth-scrolling -->
	<script type="text/javascript" th:src='@{/home/js/move-top.js}'></script>
	<script type="text/javascript" th:src='@{/home/js/easing.js}'></script>
	<script type="text/javascript">
		jQuery(document).ready(function ($) {
			$(".scroll").click(function (event) {
				event.preventDefault();
				$('html,body').animate({
					scrollTop: $(this.hash).offset().top
				}, 1000);
			});
		});
	</script>
	<!-- start-smoth-scrolling -->
	<link th:href='@{/home/css/font-awesome.css}' rel="stylesheet">
	<link th:href='@{http://fonts.googleapis.com/css?family=Montserrat:400,700}' rel='stylesheet' type='text/css'>
	<link th:href='@{http://fonts.googleapis.com/css?family=Noto+Sans:400,700}' rel='stylesheet' type='text/css'>
	<!--- start-rate---->
	<script th:src="@{/home/js/jstarbox.js}"></script>
	<link rel="stylesheet" th:href="@{/home/css/jstarbox.css}" type="text/css" media="screen" charset="utf-8" />

	<!---//End-rate---->
	<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
	<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
	<link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">

</head>

<body>
	<div layout:fragment="content">
		<a th:href="@{/home/offer}"><img src="images/download.png" class="img-head" alt=""></a> z
		<!---->

		<!--banner-->
		<div class="banner-top">
			<div class="container">
				<h3>Terms</h3>
				<h4>
					Hello Terms
				</h4>
				<div class="clearfix"></div>
			</div>
		</div>

		<!--- terms ---->
		<div class="terms">
			<div class="container">
				<div class="col-sm-3">
					<!--left col-->

					<div class="text-center">
						<img src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png" id="userImg"
							class="avatar img-circle img-thumbnail" alt="avatar">
						<br>
						<h6>[(#{user.image})]</h6>
						<br> <input type="file" name="fileImage" id="fileImage" accept="image/png, image/jpeg">
					</div>
					</hr>
					<br>


					<div class="panel panel-default">
						<div class="panel-heading">
							Website <i class="fa fa-link fa-1x"></i>
						</div>
						<div class="panel-body">
							<a  th:href="@{/home}">BigStore.com</a>
						</div>
					</div>
					<div class="panel panel-default">
					 <a th:href="@{/home/contact} "><div class="panel-heading">Liên Hệ </div></a>
					</div>
				</div>
				<!--/col-3-->

				<div class="col-sm-8" style="margin-top: 100px; left: 40px; border-style: ridge; padding: 20px">
					<ul class="nav nav-tabs">
						<li class="active"><a data-toggle="tab" href="#home">[(#{user.info})]</a></li>
						<li><a data-toggle="tab" href="#messages">[(#{user.order})]</a></li>
					</ul>


					<div class="tab-content">
						<div class="tab-pane active" id="home">
							<hr>
							<input id="txtidUsers" type="hidden">
							<form class="form" id="registrationForm1">
								<div class="form-group">
									<div class="col-xs-6">
										<label>
											<h4 style=" margin-top : 10px ;">[(#{user.users})]</h4>
										</label> <input type="text" class="form-control" name="first_name"
											id="txtuserName" disabled="false" title="enter your first name if any." style=" margin-top : 3px">
									</div>
								</div>
								<div class="form-group">
									<div class="col-xs-6">
										<label>
											<h4 style=" margin-top : 10px ;">[(#{user.passw})]</h4>
										</label> <input type="password" class="form-control" name="mobile"
											id="txtPassword" disabled="false" style=" margin-top : 3px;">
									</div>
								</div>
								<div class="form-group">

									<div class="col-xs-6">
										<label>
											<h4 style=" margin-top : 10px ;">[(#{user.name})]</h4>
										</label> <br> <input type="text" class="form-control" name="full_name"
											id="txtfullName" title="enter your last name if any."style=" margin-top : 3px;">
									</div>
								</div>

								<div class="form-group">

									<div class="col-xs-6">
										<label>
											<h4 style=" margin-top : 10px ;">[(#{user.email})]</h4>
										</label> <input type="email" class="form-control" name="phone" id="txtEmail"
											title="enter your phone number if any." style=" margin-top : 3px;">
									</div>
								</div>

								<div class="form-group">
									<div class="col-xs-6">
										<label>
											<h4 style=" margin-top : 10px ;">[(#{user.phone})]</h4>
										</label> <input type="text" class="form-control" name="mobile" id="txtPhone" style=" margin-top : 3px;">
									</div>
								</div>

								<div class="form-group" >
									<div class="col-xs-6">
										<label>
											<h4 style=" margin-top : 10px ;">[(#{user.addre})]</h4>
										</label> <input type="text" class="form-control" name="mobile" id="txtAddress" style=" margin-top : 3px ;">
									</div>
								</div>
								<div class="form-group">
									<div class="col-xs-12">
										<br>
										<!-- 		<button id="btnCreated" class="mdc-button mdc-button--unelevated mdc-ripple-upgraded"
									style="--mdc-ripple-fg-size:57px; --mdc-ripple-fg-scale:1.96776; --mdc-ripple-fg-translate-start:42.5px, -7.5px; --mdc-ripple-fg-translate-end:19.3047px, -10.5px;">
									Create
								</button> -->
										<button class="btn btn-lg btn-success" id="btnCreated">
											<i class="glyphicon glyphicon-ok-sign"></i> [(#{user.updat})]
										</button>
										<button class="btn btn-lg" type="reset">
											<a  th:href="@{/home/sendEmail}"><i class="glyphicon glyphicon-repeat" ></i> [(#{user.chang})]</a>
										</button>
									</div>
								</div>
							</form>

							<hr>

						</div>
						<!--/tab-content-->

						<div class="tab-pane" id="messages">

							<h3>Order History</h3>
							<div class="main-wrapper mdc-drawer-app-content">
								<div class="page-wrapper mdc-toolbar-fixed-adjust">
									<main class="content-wrapper">
										<div class="mdc-layout-grid">
											<div class="mdc-layout-grid__inner">
												<div
													class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
													<div class="mdc-card p-0">
														<div class="table-responsive">
															<br>
															<br>
															<table id="tableOrderHistProfile"
																class="table table-hoverable">
																<thead>
																	<tr>
																		<th class="text-left">[(#{order.stt})]</th>
																		<th>[(#{order.code})]</th>
																		<th>[(#{order.orddt})]</th>
																		<th>[(#{order.ordtm})]</th>
																		<th>[(#{order.totalprc})]</th>
																		<th>[(#{order.process_sts})]</th>
																	</tr>
																</thead>
																<tbody id="bodytableOrderHistProfile">
															</table>
														</div>
													</div>
												</div>
											</div>
										</div>
									</main>
								</div>
							</div>
							<div class="form-group">
								<div class="col-xs-12">
									<br> <a th:href="@{/home/OrderHistory} "> <button class="btn btn-lg btn-success">
											<i class="glyphicon glyphicon-ok-sign"></i> [(#{user.order})]
										</button></a>

								</div>
							</div>
							</form>

						</div>
						<!--/tab-pane-->


					</div>


				</div>

				<script type="text/javascript">
					function reloadTable(data) {
						if (data.username == null) {
							$('#txtuserName').val(data.idaccount);
							$("#txtPassword").prop('disabled', true);
							$("#txtfullName").prop('disabled', true);
							$("#txtEmail").prop('disabled', true);
						}

						else {
							$('#txtuserName').val(data.username);
							$("#btnCreated").prop('disabled', false);
						}
						$('#txtfullName').val(data.users.fullname);
						$('#txtPhone').val(data.users.phone);
						$('#txtEmail').val(data.users.email);
						$('#txtidUsers').val(data.users.id);
						$('#txtAddress').val(data.users.address);
						$('#txtPassword').val(data.hashPassword);

						let pathimg = "/admin/images/faces/" + data.users.imgUrl;
						$('#userImg').attr("src", pathimg);
						$("#txtuserName").prop('disabled', true);
					};

					function loadDataProd() {
						let response = '/api/account/users/loadAccount'
						$.ajax({
							type: "GET",
							url: response,
							contentType: "application/json",
							success: function (data) {
								reloadTable(data);
							},
							error: function (e) {
								Swal.fire({
									icon: 'error',
									text: "Can't load data !!!",
								})
							}
						})
					}


					function addUsers() {
						let response = '/api/account/users/update';
						let image = $('#userImg').attr("src");
						const Email = $("#txtEmail").val();
						const fullName = $("#txtfullName").val();
						const hashPassword = $("#txtHashPassWord").val();
						const usersName = $("#txtuserName").val();
						const phone = $("#txtPhone").val();
						const address = $("#txtAddress").val();
						const idProd = $("#txtidUsers").val() || null;
						let jsonData = {
							id: idProd,
							email: Email,
							fullname: fullName,
							hashPassword: hashPassword,
							phone: phone,
							address: address,
							username: usersName,
							imgUrl: image,
						};
						$.ajax({
							type: "POST",
							url: response,
							data: JSON.stringify(jsonData),
							contentType: "application/json",
							success: function (data) {
								Swal.fire({
									icon: 'success',
									text: data.status,
									timer: 5000,
								}).then(function () {
									loadDataProd();
								});
							},
							error: function (e) {
								Swal.fire({
									icon: 'error',
									text: data.status,
								})
							}
						});
					}

					function CreateTableOrder(data) {
						let body = ''
						let backgroundColor = '';
						for (let i = 0; i < data.length; i++) {
							if (data[i].process.id == 1) {
								backgroundColor = "background-color: #CAE5E8;"
							}
							else if (data[i].process.id == 2) {
								backgroundColor = "background-color: #6EC3C9;"
							}
							else if (data[i].process.id == 3) {
								backgroundColor = "background-color: #FEF889;"
							}
							else if (data[i].process.id == 4) {
								backgroundColor = "background-color: #5BBD2B;"
							}
							else if (data[i].process.id == 5 || data[i].process.id == 6) {
								backgroundColor = "background-color: #ff777c;"
							};
							body += `<tr  class="text-center" style="${backgroundColor} cursor: pointer;">` +
								`<td>${i + 1}</td>` +
								`<td >${"PO" + data[i].id}</td>\n` +
								`<td >${data[i].createDate.substring(0, 10)}</td>\n` +
								`<td >${data[i].createDate.substring(11, 19)}</td>\n` +
								`<td >${numberWithCommas(data[i].totalprice)}</td>\n` +
								`<td >${data[i].process.description}</td>` +
								`</tr>`
						}
						$('#bodytableOrderHistProfile').html(body);
						$('#tableOrderHistProfile').DataTable({"lengthMenu": [ [4], [4] ],"bLengthChange" : false});
					};

					function searchOrder() {
						let url = '';
						url = "/api/order/AllorderData";
						$.ajax({
							type: "GET",
							url: url,
							contentType: "application/json",
							success: function (data) {
								ListOrder = data;
								CreateTableOrder(data)
							},
							error: function (e) {
								Swal.fire({
									icon: 'error',
									text: "Bạn Chưa Đăng Nhập !!!",
								})
							}
						})

					};

				</script>
				
				<script type="text/javascript">
					$("#btnCreated").click(function () {
						addUsers();
						setValueToForm(users);
					});

					$(document).ready(function () {
						$('#fileImage').change(function () {
							ShownImage(this);
						})
						loadDataProd();
						searchOrder();
					})
					function ShownImage(fileInput) {
						file = fileInput.files[0];
						reader = new FileReader();
						reader.onload = function (e) {
							$('#userImg').attr('src', e.target.result);
						};
						reader.readAsDataURL(file);
					}
				</script>
			</div>

			<!-- //footer-->
			<!-- smooth scrolling -->
			<script type="text/javascript">
				$(document).ready(function () {

					$().UItoTop({
						easingType: 'easeOutQuart'
					});
				});
			</script>
			<a href="#" id="toTop" style="display: block;"> <span id="toTopHover" style="opacity: 1;"> </span></a>
			<!-- //smooth scrolling -->
			<!-- for bootstrap working -->
			<script th:src="@{js/bootstrap.js}"></script>
			<!-- //for bootstrap working -->
</body>

</html>